CREATE TABLE FAFILE (
	fiID INT NOT NULL CONSTRAINT FAFILE_PK PRIMARY KEY,
	fiNAME VARCHAR(260), 
	fiEXTENSION VARCHAR(5) NOT NULL, 
	fiACTIVE SMALLINT
);
					
CREATE TABLE FILERECORD (
    frID INT NOT NULL GENERATED ALWAYS AS IDENTITY 
    (START WITH 1, INCREMENT BY 1) CONSTRAINT FILERECORD_PK PRIMARY KEY,
	frfiID INT NOT NULL, 
	frPATH VARCHAR(210), 
	frSIZE INT NOT NULL, 
	frMOD_DATE TIMESTAMP NOT NULL,
	CONSTRAINT frfiID_fk FOREIGN KEY (frfiID) REFERENCES FAFILE(fiID) 
);

CREATE TABLE SUMMARYRECORD (
    srID INT NOT NULL GENERATED ALWAYS AS IDENTITY 
    (START WITH 1, INCREMENT BY 1) CONSTRAINT SUMMARYRECORD_PK PRIMARY KEY,
    srDateTimeCheck TIMESTAMP  NOT NULL,
    srNumFiles INT  NOT NULL,
    srDiskSpace INT  NOT NULL,
    srNumFilesAdded INT  NOT NULL,
    srNumFilesDeleted INT  NOT NULL,
    srNumFilesModified INT  NOT NULL
);

CREATE TABLE LINK (
    liID INT  NOT NULL GENERATED ALWAYS AS IDENTITY 
    (START WITH 1, INCREMENT BY 1) CONSTRAINT LINK_PK PRIMARY KEY,
    lifiID INT  NOT NULL,
    liLINKEDFILEID INT NOT NULL,
	CONSTRAINT lifiID_fk FOREIGN KEY (lifiID) REFERENCES FAFILE(fiID) 
);

CREATE TABLE FA_USER (
    usID INT CONSTRAINT FA_USER_PK PRIMARY KEY,
    usName CHAR(25) NOT NULL,
    usFirstLogin SMALLINT NOT NULL,
    usConsecFailedLogin SMALLINT NOT NULL
);

CREATE TABLE LOGINS (
    loID INT  NOT NULL GENERATED ALWAYS AS IDENTITY 
    (START WITH 1, INCREMENT BY 1) CONSTRAINT LOGINS_PK PRIMARY KEY,
    lousID INT  NOT NULL,
    loDate TIMESTAMP  NOT NULL,
    loSuccess SMALLINT NOT NULL,
    CONSTRAINT lousID_fk FOREIGN KEY (lousID) REFERENCES FA_USER(usID)
);

CREATE TABLE ACTIONLOG (
    alID INT  NOT NULL GENERATED ALWAYS AS IDENTITY 
    (START WITH 1, INCREMENT BY 1) CONSTRAINT ACTIONLOG_PK PRIMARY KEY,
    alDate TIMESTAMP  NOT NULL,
    alType VARCHAR(10) NOT NULL,
    alusID INT NOT NULL    
);

CREATE TABLE MEMO (
    meID INT  NOT NULL GENERATED ALWAYS AS IDENTITY 
    (START WITH 1, INCREMENT BY 1) CONSTRAINT MEMO_PK PRIMARY KEY,
    meDate TIMESTAMP NOT NULL,
    meText VARCHAR(10000) NOT NULL,
    mefiID INT NOT NULL,
    CONSTRAINT mefiID_fk FOREIGN KEY (mefiID) REFERENCES FAFILE(fiID)    
);

CREATE TABLE TICKLEREVENT (
    teID INT NOT NULL GENERATED ALWAYS AS IDENTITY 
    (START WITH 1, INCREMENT BY 1) CONSTRAINT TICKLEREVENT_PK PRIMARY KEY,
    tefiID INT  NOT NULL,
    teDate TIMESTAMP  NOT NULL,
    teAction VARCHAR(300)  NOT NULL,
    teResolved SMALLINT NOT NULL
)
	
